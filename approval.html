<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Approval Poll</title>
  </head>
  <body>
    <center>Approve</center>
    <form id="form" action="index.html">
      <input type="button" value="Approve"  onclick="rating(true)"></input>
      <input type="button" value="Disapprove" onclick = "rating(false)"></input>

    </form>
<p id = "rating"></p>
	<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-database.js"></script>

<script>
  // Your web app's Firebase configuration
  var config = {
    apiKey: "AIzaSyBayLFfDurA0OkvPu7Gksk3ywol0JjFPgQ",
    authDomain: "presidential-29357.firebaseapp.com",
    databaseURL: "https://presidential-29357.firebaseio.com",
    
    storageBucket: "presidential-29357.appspot.com"
    
  };
  // Initialize Firebase
  firebase.initializeApp(config);
  
  var database = firebase.database();
</script>
<script>
  if(total == null){
    var total = 0;
    var approval = 0;
  }
  function rating(approved) {

     var form = document.getElementById("form");
     total++;
     if(approved == true)
       approval++;
	console.log(approval);
	var text = "Approval: " + approval + "\nTotal: " + total;
	var ref = firebase.database().ref('presidential-29357');

	var totalRef = ref.child('total');

totalRef.transaction(function(total) {
   return total + 1;
});
    //document.getElementById("rating").innerHTML = text;
  }

</script>

  </body>
</html>
